<!--
  File: index.html
  Path: public/index.html
  Description:
    Safe, non‑blocking boot error overlay.
    Logs boot‑time errors without preventing React or playback.
-->

<!-- Boot error overlay (safe version) -->
<script>
  (function () {
    const overlay = document.createElement("div");
    overlay.id = "boot-error-overlay";

    Object.assign(overlay.style, {
      position: "fixed",
      top: "0",
      left: "0",
      right: "0",
      bottom: "0",
      background: "rgba(0,0,0,0.92)",
      color: "#ff4444",
      fontFamily: "monospace",
      fontSize: "14px",
      padding: "20px",
      zIndex: "2147483647",
      overflowY: "auto",
      whiteSpace: "pre-wrap",
      display: "none",
      pointerEvents: "auto"
    });

    document.body.appendChild(overlay);

    function makeButton(label, rightOffset, onClick) {
      const btn = document.createElement("button");
      btn.innerText = label;

      Object.assign(btn.style, {
        position: "absolute",
        top: "10px",
        right: rightOffset,
        padding: "6px 12px",
        background: "#444",
        color: "#fff",
        border: "1px solid #666",
        borderRadius: "4px",
        cursor: "pointer",
        zIndex: "2147483647",
        pointerEvents: "auto"
      });

      btn.onclick = onClick;
      overlay.appendChild(btn);
    }

    makeButton("Continue", "10px", () => {
      overlay.style.display = "none";
    });

    makeButton("Copy Logs", "110px", () => {
      navigator.clipboard.writeText(overlay.innerText);
    });

    function showError(msg) {
      overlay.style.display = "block";
      overlay.innerText += msg + "\n";

      // Never block boot — always allow React to mount
      window.__BOOT_READY = true;
    }

    window.addEventListener("error", (e) => {
      showError("BOOT ERROR → " + e.message);
    });

    window.addEventListener("unhandledrejection", (e) => {
      showError("BOOT PROMISE → " + (e.reason?.message || e.reason));
    });

    window.__bootErrorOverlay = { showError };
  })();
</script>
